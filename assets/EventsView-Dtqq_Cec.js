import{d as x,i as R,j as u,e as M,w as h,o as n,c as o,F as L,r as O,b as e,k,l as W,t as r,m as d,p as y,_ as $,h as F,g as P}from"./index-BOY-LNnF.js";const Q={key:0,class:"main"},z={class:"card"},J={class:"wrapper"},X={class:"dateDisplay"},K={class:"eventDay"},Y={class:"eventMonth"},Z={class:"eventTime"},tt={class:"eventTimeOfDay"},et={class:"dateDisplay"},st={class:"eventDay"},at={class:"eventMonth"},nt={class:"eventTime"},ot={class:"eventTimeOfDay"},it={key:0},rt={key:0},ct=["src"],lt=["innerHTML"],dt={key:3},ut={key:1,class:"empty"},mt=x({__name:"GoogleCalendar",props:{calendarID:{type:String,required:!1}},setup(C){W(a=>({b836026e:m.value}));const v=R("branch",u("General")),m=M(()=>"var("+y[v.value].color+")"),g=C,i=u({items:[]}),c=u(),D=new XMLHttpRequest;function w(){D.onreadystatechange=function(){this.readyState==4&&this.status==200&&(i.value=JSON.parse(this.responseText))},D.open("GET",`https://www.googleapis.com/calendar/v3/calendars/${g.calendarID}/events?key=AIzaSyC7fs2QT_Hb9Q3Tn5_7bhLcOISwqsgLyg4&maxResults=16&orderBy=startTime&singleEvents=true&timeMin=${new Date().toISOString()}`,!0),D.send()}w();const p=u([]);return h(()=>g.calendarID,()=>{i.value={items:[]},p.value=[],w()},{immediate:!0}),h(i,()=>{const a=i.value.items;for(const s in a){const t=new Date(a[s].start.dateTime),_=new Date(a[s].end.dateTime),l=t.getDate(),f=String(l).length==1?"0"+String(l):l,B=String(t).split(" ")[1].toUpperCase(),T=t.toLocaleTimeString(navigator.language,{hour:"2-digit",minute:"2-digit"}).split(" "),G=T[0],E=T.length>1?T[1]:"",S=_.getDate(),N=String(S).length==1?"0"+String(S):S,U=String(_).split(" ")[1].toUpperCase(),b=_.toLocaleTimeString(navigator.language,{hour:"2-digit",minute:"2-digit"}).split(" "),A=b[0],V=b.length>1?b[1]:"",j=a[s].summary,H=a[s].location;let I=null;Object.keys(a[s]).includes("attachments")&&(I="https://drive.google.com/thumbnail?id="+a[s].attachments[0].fileId);const q=a[s].description;p.value.push({start:{day:f,month:B,time:G,timeOfDay:E},end:{day:N,month:U,time:A,timeOfDay:V},summary:j,location:H,imageUrl:I,description:q})}}),h(c,()=>{for(const a in c.value)for(const s in c.value[a].getElementsByTagName("a"))try{c.value[a].getElementsByTagName("a")[s].setAttribute("target","_blank")}catch{continue}}),(a,s)=>(n(),o("main",null,[p.value.length?(n(),o("div",Q,[(n(!0),o(L,null,O(p.value,(t,_)=>(n(),o("div",z,[e("div",J,[e("div",X,[e("div",K,r(t.start.day),1),e("div",Y,r(t.start.month),1),e("div",Z,r(t.start.time),1),e("div",tt,r(t.start.timeOfDay),1)]),s[0]||(s[0]=e("div",{class:"dateDisplay"},"TILL",-1)),e("div",et,[e("div",st,r(t.end.day),1),e("div",at,r(t.end.month),1),e("div",nt,r(t.end.time),1),e("div",ot,r(t.end.timeOfDay),1)])]),e("div",{ref_for:!0,ref_key:"content",ref:c,class:"content",style:{padding:"15px"}},[String(t.summary).startsWith("!")?d("",!0):(n(),o("div",it,[(n(!0),o(L,null,O(t.summary.split("\\n"),(l,f)=>(n(),o("b",null,[k(r(l),1),f!=t.summary.split("\\n").length?(n(),o("br",rt)):d("",!0)]))),256))])),t.imageUrl?(n(),o("img",{key:1,class:"googleDriveImage",src:t.imageUrl},null,8,ct)):d("",!0),t.description&&!String(t.description).startsWith("!")?(n(),o("div",{key:2,innerHTML:t.description,class:"googleCalendarDescription"},null,8,lt)):d("",!0),t.location&&!String(t.location).startsWith("!")?(n(),o("div",dt,"Location: "+r(t.location),1)):d("",!0)],512)]))),256))])):(n(),o("div",ut,s[1]||(s[1]=[e("h1",null,[k("Pretty empty right now."),e("br"),k("Maybe next time?")],-1)])))]))}}),gt=$(mt,[["__scopeId","data-v-31d7389e"]]),_t=x({__name:"EventsView",setup(C){const v=P(),m=u("General"),g=M(()=>{for(const i in y)if(m.value==y[i].path.substring(1))return y[i].GoogleCalendar;return""});return h(()=>v.path,i=>{const c=i.substring(1).split("/");m.value=c[0]},{immediate:!0}),(i,c)=>(n(),F(gt,{calendarID:g.value},null,8,["calendarID"]))}});export{_t as default};
