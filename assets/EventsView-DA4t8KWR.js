import{d as B,i as P,j as g,e as G,w as y,o as n,c as o,F as O,r as M,b as e,k,l as R,t as r,m as u,p as _,s as $,_ as F,h as Q,g as z}from"./index-CfITSv8w.js";const J={key:0,class:"main"},X={class:"card"},K={class:"wrapper"},Y={class:"dateDisplay"},Z={class:"eventDay"},tt={class:"eventMonth"},et={class:"eventTime"},st={class:"eventTimeOfDay"},at={class:"dateDisplay"},nt={class:"eventDay"},ot={class:"eventMonth"},it={class:"eventTime"},rt={class:"eventTimeOfDay"},ct={key:0},lt={key:0},dt=["src"],ut=["innerHTML"],gt={key:3},mt={key:1,class:"empty"},C="-",ht=B({__name:"GoogleCalendar",props:{calendarID:{type:String,required:!1}},setup(w){R(a=>({"2df8b1da":m.value}));const v=P("branch",g("General")),m=G(()=>"var("+_[v.value].color+")"),h=w,i=g({items:[]}),c=g(),f=new XMLHttpRequest;function I(){f.onreadystatechange=function(){this.readyState==4&&this.status==200&&(i.value=JSON.parse(this.responseText))},f.open("GET",`https://www.googleapis.com/calendar/v3/calendars/${h.calendarID}/events?key=AIzaSyC7fs2QT_Hb9Q3Tn5_7bhLcOISwqsgLyg4&maxResults=16&orderBy=startTime&singleEvents=true&timeMin=${new Date().toISOString()}`,!0),f.send()}I();const p=g([]);return y(()=>h.calendarID,()=>{i.value={items:[]},p.value=[],I()},{immediate:!0}),y(i,()=>{const a=i.value.items;for(const s in a){const t=a[s].summary;if(t.startsWith("?")&&!$.Tools.display)continue;const L=a[s].location,l=new Date(a[s].start.dateTime),d=new Date(a[s].end.dateTime),D=l.getDate(),N=String(D).length==1?"0"+String(D):D,E=String(l).split(" ")[1].toUpperCase(),T=l.toLocaleTimeString(navigator.language,{hour:"2-digit",minute:"2-digit"}).split(" "),U=T[0],A=T.length>1?T[1]:"",S=d.getDate(),V=String(S).length==1?"0"+String(S):S,j=String(d).split(" ")[1].toUpperCase(),b=d.toLocaleTimeString(navigator.language,{hour:"2-digit",minute:"2-digit"}).split(" "),H=b[0],W=b.length>1?b[1]:"";let x=null;Object.keys(a[s]).includes("attachments")&&(x="https://drive.google.com/thumbnail?id="+a[s].attachments[0].fileId);const q=a[s].description;p.value.push({start:{day:N,month:E,time:U,timeOfDay:A},end:{day:V,month:j,time:H,timeOfDay:W},summary:t,location:L,imageUrl:x,description:q})}}),y(c,()=>{for(const a in c.value)for(const s in c.value[a].getElementsByTagName("a"))try{c.value[a].getElementsByTagName("a")[s].setAttribute("target","_blank")}catch{continue}}),(a,s)=>(n(),o("main",null,[p.value.length?(n(),o("div",J,[(n(!0),o(O,null,M(p.value,(t,L)=>(n(),o("div",X,[e("div",K,[e("div",Y,[e("div",Z,r(t.start.day),1),e("div",tt,r(t.start.month),1),e("div",et,r(t.start.time),1),e("div",st,r(t.start.timeOfDay),1)]),s[0]||(s[0]=e("div",{class:"dateDisplay"},"TILL",-1)),e("div",at,[e("div",nt,r(t.end.day),1),e("div",ot,r(t.end.month),1),e("div",it,r(t.end.time),1),e("div",rt,r(t.end.timeOfDay),1)])]),e("div",{ref_for:!0,ref_key:"content",ref:c,class:"content",style:{padding:"15px"}},[String(t.summary).startsWith(C)?u("",!0):(n(),o("div",ct,[(n(!0),o(O,null,M(t.summary.split("\\n"),(l,d)=>(n(),o("b",null,[k(r(l),1),d!=t.summary.split("\\n").length?(n(),o("br",lt)):u("",!0)]))),256))])),t.imageUrl?(n(),o("img",{key:1,class:"googleDriveImage",src:t.imageUrl},null,8,dt)):u("",!0),t.description&&!String(t.description).startsWith(C)?(n(),o("div",{key:2,innerHTML:t.description,class:"googleCalendarDescription"},null,8,ut)):u("",!0),t.location&&!String(t.location).startsWith(C)?(n(),o("div",gt,"Location: "+r(t.location),1)):u("",!0)],512)]))),256))])):(n(),o("div",mt,s[1]||(s[1]=[e("h1",null,[k("Pretty empty right now."),e("br"),k("Maybe next time?")],-1)])))]))}}),pt=F(ht,[["__scopeId","data-v-d072a0bd"]]),_t=B({__name:"EventsView",setup(w){const v=z(),m=g("General"),h=G(()=>{for(const i in _)if(m.value==_[i].path.substring(1))return _[i].GoogleCalendar;return""});return y(()=>v.path,i=>{const c=i.substring(1).split("/");m.value=c[0]},{immediate:!0}),(i,c)=>(n(),Q(pt,{calendarID:h.value},null,8,["calendarID"]))}});export{_t as default};
