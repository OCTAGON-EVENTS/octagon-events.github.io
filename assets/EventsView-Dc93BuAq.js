import{d as L,i as N,j as g,e as b,w as T,o as i,c as r,b as e,F as V,r as j,k as q,t as o,l as m,p as _,_ as R,h as W,g as F}from"./index-DDtEDH8A.js";const Q={class:"main"},$={class:"card"},z={class:"wrapper"},J={class:"dateDisplay"},P={class:"eventDay"},X={class:"eventMonth"},K={class:"eventTime"},Y={class:"eventTimeOfDay"},Z={class:"dateDisplay"},tt={class:"eventDay"},et={class:"eventMonth"},st={class:"eventTime"},at={class:"eventTimeOfDay"},nt={class:"content-flex",style:{padding:"15px"}},ot={key:0},it=["src"],rt=["innerHTML"],ct={key:3},lt=L({__name:"GoogleCalendar",props:{calendarID:{type:String,required:!1}},setup(S){q(a=>({"356bf9a2":l.value}));const h=N("branch",g("General")),l=b(()=>"var("+_[h.value].color+")"),d=S,s=g({items:[]}),c=new XMLHttpRequest;function C(){c.onreadystatechange=function(){this.readyState==4&&this.status==200&&(s.value=JSON.parse(this.responseText))},c.open("GET",`https://www.googleapis.com/calendar/v3/calendars/${d.calendarID}/events?key=AIzaSyC7fs2QT_Hb9Q3Tn5_7bhLcOISwqsgLyg4&maxResults=16&orderBy=startTime&singleEvents=true`,!0),c.send()}C();const p=g([]);return T(()=>d.calendarID,()=>{s.value={items:[]},p.value=[],C()},{immediate:!0}),T(s,()=>{const a=s.value.items;for(const n in a){const t=new Date(a[n].start.dateTime),u=new Date(a[n].end.dateTime),v=t.getDate(),w=String(v).length==1?"0"+String(v):v,O=String(t).split(" ")[1].toUpperCase(),y=t.toLocaleTimeString(navigator.language,{hour:"2-digit",minute:"2-digit"}).split(" "),k=y[0],x=y.length>1?y[1]:"",D=u.getDate(),G=String(D).length==1?"0"+String(D):D,M=String(u).split(" ")[1].toUpperCase(),f=u.toLocaleTimeString(navigator.language,{hour:"2-digit",minute:"2-digit"}).split(" "),B=f[0],U=f.length>1?f[1]:"",E=a[n].summary,A=a[n].location;let I=null;Object.keys(a[n]).includes("attachments")&&(I="https://drive.google.com/thumbnail?id="+a[n].attachments[0].fileId);const H=a[n].description;p.value.push({start:{day:w,month:O,time:k,timeOfDay:x},end:{day:G,month:M,time:B,timeOfDay:U},summary:E,location:A,imageUrl:I,description:H})}}),(a,n)=>(i(),r("main",null,[e("div",Q,[(i(!0),r(V,null,j(p.value,(t,u)=>(i(),r("div",$,[e("div",z,[e("div",J,[e("div",P,o(t.start.day),1),e("div",X,o(t.start.month),1),e("div",K,o(t.start.time),1),e("div",Y,o(t.start.timeOfDay),1)]),n[0]||(n[0]=e("div",{class:"dateDisplay"},"TILL",-1)),e("div",Z,[e("div",tt,o(t.end.day),1),e("div",et,o(t.end.month),1),e("div",st,o(t.end.time),1),e("div",at,o(t.end.timeOfDay),1)])]),e("div",nt,[String(t.summary).startsWith("!")?m("",!0):(i(),r("div",ot,o(t.summary),1)),t.imageUrl?(i(),r("img",{key:1,class:"googleDriveImage",src:t.imageUrl},null,8,it)):m("",!0),t.description&&!String(t.description).startsWith("!")?(i(),r("div",{key:2,innerHTML:t.description},null,8,rt)):m("",!0),t.location&&!String(t.location).startsWith("!")?(i(),r("div",ct,"Location: "+o(t.location),1)):m("",!0)])]))),256))])]))}}),dt=R(lt,[["__scopeId","data-v-4754516a"]]),mt=L({__name:"EventsView",setup(S){const h=F(),l=g("General"),d=b(()=>{for(const s in _)if(l.value==_[s].path.substring(1))return _[s].GoogleCalendar;return""});return T(()=>h.path,s=>{const c=s.substring(1).split("/");l.value=c[0]},{immediate:!0}),(s,c)=>(i(),W(dt,{calendarID:d.value},null,8,["calendarID"]))}});export{mt as default};
