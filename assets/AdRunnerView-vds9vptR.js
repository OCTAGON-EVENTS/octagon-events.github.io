import{d as A,j as o,o as S,c as N,b as s,F as D}from"./index-BqKHzq81.js";const p=.5,M=20,B=A({__name:"AdRunnerView",setup(O){let b=!1,y=!1;const u=o(),h=o(),k=o(),f=o(),_=o(),T=o(),E=o();async function i(a=1){await new Promise(t=>setTimeout(t,a*1e3))}async function L(){u.value.style.animation="opacity "+p+"s "+(y?"reverse":""),u.value.style.display="block",await i(p),y&&(u.value.style.display="none"),u.value.style.animation="",y=!y}async function m(){h.value.style.animation="opacity "+p+"s "+(b?"reverse":""),await i(p),h.value.style.animation="",b=!b}async function C(a="Global"){const t="https://raw.githubusercontent.com/OCTAGON-EVENTS/Ads/main";return new Promise((r,v)=>{const n=new XMLHttpRequest;n.onreadystatechange=function(){if(this.readyState==4)if(this.status==200){let e=this.responseText.split(`
`);for(const c in e)e[c].trim()!=""&&(e[c]=t+"/"+a+"/"+e[c]);e=e.join(`
`),r(e)}else v(new Error("Failed to load data"))},n.open("GET",t+"/"+a+"/"+a+".txt",!0),n.send()})}async function x(){let a=[];for(;;){let t="";try{t=await C()}catch{}t=t.replaceAll("\r","");let r="";const v=window.location.hash.substring(1).replaceAll("%20"," ");try{v&&(r=await C(v),r=r.replaceAll("\r",""))}catch{}const n=(t+r).trim().split(`
`),e=[];for(const l in n){const d=n[l].split("?")[0].split("/").reverse()[0].split("_")[0];if(d.toUpperCase()=="X"){e.push(n[l].trim());continue}try{new Date(d)-new Date(new Date().toISOString().split("T")[0])>0&&e.push(n[l])}catch{continue}}await i(5);let c=!1;e.length>25&&(c=!0);let w=1;for(;e.length!=0;){w==1&&L();const l=Math.floor(Math.random()*e.length),g=e[l],d=g.split("?")[0].split(".").reverse()[0].toLowerCase();if(["webm","mp4"].includes(d)&&(T.value.attributes.src.value=g,k.value.style.display="block",f.value.load(),await m(),await i(f.value.duration-p-.1),await m(),k.value.style.display="none",T.value.attributes.src.value="",f.value.load()),["png"].includes(d)&&(E.value.attributes.src.value=g,_.value.style.display="block",await m(),await i(M),await m(),_.value.style.display="none",E.value.attributes.src.value=" "),a.push(e[l]),e.splice(l,1),c&&w==1){w+=1,await i(2);continue}else w=1,L(),await i(5*60)}a=[]}}return x(),(a,t)=>(S(),N(D,null,[s("div",{ref_key:"background",ref:u,id:"background",style:{display:"none"}},t[0]||(t[0]=[s("div",{class:"fullscreen"},null,-1)]),512),s("div",{ref_key:"contentWrapper",ref:h,id:"content-wrapper"},[s("div",{ref_key:"videoContainer",ref:k,id:"video-container",style:{display:"none"}},[s("video",{ref_key:"videoElement",ref:f,class:"fullscreen",autoplay:"",muted:""},[s("source",{ref_key:"sourceElement",ref:T,src:"",type:"video/mp4"},null,512)],512)],512),s("div",{ref_key:"imageContainer",ref:_,id:"image-container",class:"fullscreen",style:{display:"none"}},[s("img",{ref_key:"imageElement",ref:E,src:""},null,512)],512)],512)],64))}});export{B as default};
