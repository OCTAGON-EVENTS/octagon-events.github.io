import{d as A,j as c,o as N,c as O,b as i,F as x}from"./index-CRL9C_Ov.js";const y=.5,B=20,I=A({__name:"AdRunnerView",setup(G){let h=!1,f=!1;const p=c(),b=c(),k=c(),m=c(),_=c(),T=c(),C=c();async function l(a=1){await new Promise(e=>setTimeout(e,a*1e3))}async function E(){p.value.style.animation="opacity "+y+"s "+(f?"reverse":""),p.value.style.display="block",await l(y),f&&(p.value.style.display="none"),p.value.style.animation="",f=!f}async function v(){b.value.style.animation="opacity "+y+"s "+(h?"reverse":""),await l(y),b.value.style.animation="",h=!h}async function L(a="Global"){a=a.replace(" ","-");const e="https://api.github.com/repos/OCTAGON-EVENTS/OCTAGON-"+a+"/contents/Images/Poster";let n="";return new Promise(o=>{const s=new XMLHttpRequest;s.onreadystatechange=function(){if(this.readyState==4)if(this.status==200)try{const t=JSON.parse(this.response);if(t.status==="404"){o("");return}for(const g in t){const u=t[g];n+=u.download_url+`
`}o(n)}catch{o("")}else o("")},s.open("GET",e,!0),s.send()})}async function S(){let a=[];for(;;){let e="";try{e=String(await L())}catch{}e=e.replaceAll("\r",""),console.log("#################### GLOBAL"),console.log(e);let n="";const o=window.location.hash.substring(1).replaceAll("%20"," ");try{o&&(n=String(await L(o)),n=n.replaceAll("\r",""))}catch{}console.log("#################### BRANCH"),console.log(n);const s=(e+n).trim().split(`
`),t=[];for(const r in s){const d=s[r].split("?")[0].split("/").reverse()[0].split("_")[0];if(d.toUpperCase()=="X"){t.push(s[r].trim());continue}try{new Date(d)-new Date(new Date().toISOString().split("T")[0])>0&&t.push(s[r].trim())}catch{continue}}await l(5);let g=!1;t.length>25&&(g=!0);let u=1;for(;t.length!=0;){u==1&&E();const r=Math.floor(Math.random()*t.length),w=t[r],d=w.split("?")[0].split(".").reverse()[0].toLowerCase();if(["webm","mp4"].includes(d)&&(T.value.attributes.src.value=w,k.value.style.display="block",m.value.load(),await v(),await l(m.value.duration-y-.1),await v(),k.value.style.display="none",T.value.attributes.src.value="",m.value.load()),["png"].includes(d)&&(C.value.attributes.src.value=w,_.value.style.display="block",await v(),await l(B),await v(),_.value.style.display="none",C.value.attributes.src.value=" "),a.push(t[r]),t.splice(r,1),g&&u==1){u+=1,await l(2);continue}else u=1,E(),await l(5*60)}a=[]}}return S(),(a,e)=>(N(),O(x,null,[i("div",{ref_key:"background",ref:p,id:"background",style:{display:"none"}},e[0]||(e[0]=[i("div",{class:"fullscreen"},null,-1)]),512),i("div",{ref_key:"contentWrapper",ref:b,id:"content-wrapper"},[i("div",{ref_key:"videoContainer",ref:k,id:"video-container",style:{display:"none"}},[i("video",{ref_key:"videoElement",ref:m,class:"fullscreen",autoplay:"",muted:""},[i("source",{ref_key:"sourceElement",ref:T,src:"",type:"video/mp4"},null,512)],512)],512),i("div",{ref_key:"imageContainer",ref:_,id:"image-container",class:"fullscreen",style:{display:"none"}},[i("img",{ref_key:"imageElement",ref:C,src:""},null,512)],512)],512)],64))}});export{I as default};
